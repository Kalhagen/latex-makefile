#!/bin/bash

pwd=$(pwd)

while file=$(inotifywait -r -q -e delete -e create -e modify -e move --exclude '/\..+' --format %w%f $pwd); do
  case "$file" in
    *.tex | *.bib | *.sty | *.cls | *.bst | *.jpg | *.png | *.eps | *.csv )
    make all
    ;;
    *)
    # ignore
    ;;
  esac

  [ ! -d $pwd ] || inotifywait -qqt 2 -e create -e moved_to $pwd
  cd $pwd
done
